<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <!-- ========== BIKE PRODUCT VIEWS ========== -->
    
    <!-- List view for bike products -->
    <record model="ir.ui.view" id="view_bike_shop_product_list">
      <field name="name">bike.shop.product.list</field>
      <field name="model">bike.shop.product</field>
      <field name="arch" type="xml">
        <list>
          <field name="name"/>
          <field name="product_type"/>
          <field name="brand"/>
          <field name="sale_price"/>
          <field name="quantity"/>
          <field name="stock_status" widget="progressbar"/>
        </list>
      </field>
    </record>

    <!-- Form view for bike products - AMÉLIORÉE -->
    <record model="ir.ui.view" id="view_bike_shop_product_form">
      <field name="name">bike.shop.product.form</field>
      <field name="model">bike.shop.product</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <group>
              <group string="Informations générales">
                <field name="name"/>
                <field name="product_type"/>
                <field name="brand"/>
                <field name="model"/>
                <field name="size"/>
                <field name="color"/>
              </group>
              <group string="Prix et stock">
                <field name="purchase_price"/>
                <field name="sale_price"/>
                <field name="quantity"/>
                <field name="min_stock"/>
                <field name="stock_status" widget="progressbar"/>
              </group>
            </group>
            <group string="Tarifs location" attrs="{'invisible': [('product_type', '!=', 'bike')]}">
              <field name="rental_price_hour"/>
              <field name="rental_price_day"/>
              <field name="rental_price_week"/>
            </group>
            <group string="Description">
              <field name="description" nolabel="1"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <!-- Action for bike products -->
    <record model="ir.actions.act_window" id="action_bike_shop_product">
      <field name="name">Produits</field>
      <field name="res_model">bike.shop.product</field>
      <field name="view_mode">list,form</field>
    </record>

    <!-- ========== RENTAL VIEWS ========== -->
    
    <!-- List view for rentals - AMÉLIORÉE -->
    <record model="ir.ui.view" id="view_bike_shop_rental_list">
      <field name="name">bike.shop.rental.list</field>
      <field name="model">bike.shop.rental</field>
      <field name="arch" type="xml">
        <list>
          <field name="name"/>
          <field name="bike_id"/>
          <field name="customer_id"/>
          <field name="start_date"/>
          <field name="end_date"/>
          <field name="rental_type"/>
          <field name="total_price"/>
          <field name="state"/>
        </list>
      </field>
    </record>

    <!-- Form view for rentals - COMPLÈTE POUR LES LOCATIONS -->
    <record model="ir.ui.view" id="view_bike_shop_rental_form">
      <field name="name">bike.shop.rental.form</field>
      <field name="model">bike.shop.rental</field>
      <field name="arch" type="xml">
        <form>
          <header>
            <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,in_progress,returned,cancelled"/>
          </header>
          <sheet>
            <group>
              <group string="Location">
                <field name="name" readonly="1"/>
                <field name="bike_id" domain="[('product_type', '=', 'bike')]"/>
                <field name="customer_id"/>
                <field name="rental_type"/>
                <field name="unit_price"/>
              </group>
              <group string="Période">
                <field name="start_date"/>
                <field name="end_date"/>
                <field name="rental_duration" readonly="1"/>
                <field name="total_price" readonly="1"/>
              </group>
            </group>
            <group string="État et Notes">
              <field name="state"/>
              <field name="notes" nolabel="1"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <!-- Action for rentals -->
    <record model="ir.actions.act_window" id="action_bike_shop_rental">
      <field name="name">Locations</field>
      <field name="res_model">bike.shop.rental</field>
      <field name="view_mode">list,form</field>
    </record>
  </data>
</odoo>